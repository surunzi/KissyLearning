<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Attribute</title><link rel="stylesheet" href="http://surunzi.github.io/KissyLearning/css/style.css"><link rel="stylesheet" href="http://surunzi.github.io/KissyLearning/css/api.css"><link rel="shortcut icon" href="http://surunzi.github.io/KissyLearning/favicon.ico"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-52367952-1', 'auto');
      ga('send', 'pageview');</script></head><body><div id="nav"><ul class="container"><li><a href="http://surunzi.github.io/KissyLearning/">首页</a></li><li><a href="http://surunzi.github.io/KissyLearning/tutorial/">教程</a></li><li><a href="http://surunzi.github.io/KissyLearning/example/">示例</a></li><li><a href="http://surunzi.github.io/KissyLearning/api/">API</a></li><li><a href="http://surunzi.github.io/KissyLearning/tool/">工具</a></li><li><a href="http://surunzi.github.io/KissyLearning/document/">文档</a></li><li><a href="http://gallery.kissyui.com/">组件</a></li><li><a href="http://docs.kissyui.com/">官网</a></li><li><a href="https://github.com/kissyteam/kissy">GitHub</a></li><li><a href="http://surunzi.github.io/KissyLearning/feed.xml">RSS</a></li></ul></div><div id="page" data-feature="prettify,apiOverlay" data-url="http://surunzi.github.io/KissyLearning/api/"></div><div class="api container"><div class="wrapper"><h2 class="title">Attribute</h2><table><tbody><tr><td>功能</td><td>创建类</td></tr><tr><td>模块名</td><td>attribute</td></tr><tr><td>模块实质</td><td>类</td></tr></tbody></table><h3 id="section">构造函数</h3><div class="function"><h4 id="attributeconfig">Attribute(config)</h4><div class="detail"><p>config</p><p>类型：Object</p><p>描述：配置项</p></div></div><h3 id="section-1">方法</h3><div class="function"><h4 id="addattrname-attrconfig">.addAttr(name, attrConfig)：给宿主对象增加一个属性</h4><div class="detail"><p>name</p><p>类型：String</p><p>描述：属性名</p><hr><p>attrConfig</p><p>类型：Object</p><p>描述：属性配置信息</p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>getter</td><td>Function</td><td>读属性时的处理函数</td></tr><tr><td>setter</td><td>Function</td><td>写属性时的处理函数，传入从 set() 参数得到的属性值和属性名，如果返回非 undefined 则作为新的属性设置值</td></tr><tr><td>validator</td><td>Function</td><td>写属性时的验证函数，传入从 set() 参数得到的属性值和属性名，返回 false 则不改变该属性值</td></tr><tr><td>value</td><td>String | Number</td><td>属性默认值。注意默认值请不要设置为复杂对象（通过自定义构造器 new 出来的），复杂对象可设置 valueFn 返回</td></tr><tr><td>valueFn</td><td>Function</td><td>提供属性默认值的函数，传入对象内部对应的属性值和属性名，取该函数的返回值作为最终值给用户</td></tr></tbody></table><blockquote><p>如果配置项中没有设置 value, 会调用 valueFn 函数获取默认值并赋给 value。</p></blockquote></div></div><div class="function"><h4 id="addattrsattrconfigs-values">.addAttrs(attrConfigs, values)：批量添加属性</h4><div class="detail"><p>attrConfigs</p><p>类型：Object</p><p>描述：属性名/配置信息对</p><hr><p>values</p><p>类型：Object</p><p>描述：属性名/值对, 批量设置当前对象的属性值</p></div></div><div class="function"><h4 id="hasattrname-name-">.hasAttr(name)：判断是否有名为 name 的属性</h4><div class="detail"><p>name</p><p>类型：String</p><p>描述：属性名</p><hr><p>返回值</p><p>类型：Boolean</p><p>描述：是否有名为 name 的属性</p></div></div><div class="function"><h4 id="getname-name-">.get(name)：获取属性 name 的值</h4><div class="detail"><p>name</p><p>类型：name</p><p>描述：属性名</p></div></div><div class="function"><h4 id="getattrvals">. getAttrVals()：获取目前实例的所有属性键值对集合</h4><div class="detail"><p>返回值</p><p>类型：Object</p><p>描述：属性键值对集合</p></div></div><div class="function"><h4 id="removeattrname-name-">.removeAttr(name)：删除名为 name 的属性</h4><div class="detail"><p>name</p><p>类型：String</p><p>描述：属性名</p></div></div><div class="function"><h4 id="removeattrname-name--1">.removeAttr(name)：删除名为 name 的属性</h4><div class="detail"><p>name</p><p>类型：String</p><p>描述：属性名</p></div></div><div class="function"><h4 id="resetnameopts-name--set-">. reset(name,opts)：重置属性 name 为初始值（调用一次 set() ）</h4><div class="detail"><p>name</p><p>类型：String</p><p>描述：属性名</p><hr><p>opts</p><p>类型：Object</p><p>描述：控制对象</p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>silent</td><td>Boolean</td><td>默认 false , 是否触发 change 系列事件</td></tr></tbody></table></div></div><div class="function"><h4 id="resetname-set-">. reset(name)：将所有属性全部重置为初始值（调用一次 set() ）</h4><div class="detail"><p>opts</p><p>类型：Object</p><p>描述：控制对象</p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>silent</td><td>Boolean</td><td>默认 false , 是否触发 change 系列事件</td></tr></tbody></table></div></div><div class="function"><h4 id="setname-value-opts-name--value">.set(name, value, opts)：设置属性 name 的值为 value</h4><div class="detail"><p>name</p><p>类型：String</p><p>描述：属性名</p><blockquote><p>也可以为 “x.y” 形式，此时要求 x 属性为包含 y 属性的普通 Object，这时会设置 x 属性值的 y 属性.但只会触发 x 的相关 change 事件</p></blockquote><hr><p>value</p><p>类型：String</p><p>描述：属性的值</p><hr><p>opts</p><p>类型：Object</p><p>描述：控制对象</p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>error</td><td>Function</td><td>验证失败的回调，包括失败原因</td></tr><tr><td>force</td><td>Function</td><td>是否强制触发 change 事件，默认值为 false，当值发生变化时才触发</td></tr><tr><td>silent</td><td>Boolean</td><td>默认 false , 是否触发 change 系列事件</td></tr></tbody></table><hr><p>返回值</p><p>类型：Boolean</p><p>描述：该次属性设置是否生效（是否通过了 validator 验证）</p></div></div><div class="function"><h4 id="setjson-opts">.set(json, opts)：批量设置属性值</h4><div class="detail"><p>json</p><p>类型：String</p><p>描述：属性名与属性值的键值对</p><hr><p>opts</p><p>类型：Object</p><p>描述：控制对象</p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>error</td><td>Function</td><td>验证失败的回调，包括失败原因</td></tr><tr><td>force</td><td>Function</td><td>是否强制触发 change 事件，默认值为 false，当值发生变化时才触发</td></tr><tr><td>silent</td><td>Boolean</td><td>默认 false , 是否触发 change 系列事件</td></tr></tbody></table><hr><p>返回值</p><p>类型：Boolean</p><p>描述：该次属性设置是否生效（是否通过了 validator 验证）</p></div></div><h3 id="section-2">事件</h3><div class="function"><h4 id="afterattrnamechangee-attrname--">.afterAttrNameChange(e)：名为 attrName 的属性, 在改变它的值之后触发该事件</h4><div class="detail"><p>e</p><table><thead><tr><th>属性</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>attrName</td><td>String</td><td>当前的属性名</td></tr><tr><td>newVal</td><td>*</td><td>当前的属性值</td></tr><tr><td>prevVal</td><td>*</td><td>当前改变前的属性值</td></tr><tr><td>subAttrName</td><td>String</td><td>当前的完整属性名</td></tr></tbody></table></div></div><div class="function"><h4 id="beforeattrnamechangee-attrname--">.beforeAttrNameChange(e)：名为 attrName 的属性, 在改变它的值之前触发该事件</h4><div class="detail"><p>e</p><table><thead><tr><th>属性</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>attrName</td><td>String</td><td>当前的属性名</td></tr><tr><td>newVal</td><td>*</td><td>将要改变到的属性值</td></tr><tr><td>prevVal</td><td>*</td><td>当前的属性值</td></tr><tr><td>subAttrName</td><td>String</td><td>当前的完整属性名</td></tr></tbody></table></div></div><div class="function"><h4 id="changee-set-">*Change(e)：每调用 set() 一次后就触发一次该事件</h4><div class="detail"><p>e</p><table><thead><tr><th>属性</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>attrName</td><td>Array</td><td>本次 set 导致改变的属性名集合</td></tr><tr><td>newVal</td><td>Array</td><td>本次 set 导致的属性当前值集合</td></tr><tr><td>prevVal</td><td>Array</td><td>本次 set 导致的属性在 set 前的值集合</td></tr><tr><td>subAttrName</td><td>Array</td><td>本次 set 导致的属性全名集合</td></tr></tbody></table></div></div><div id="post-disqus-container"><div id="disqus_thread"></div></div></div><div id="overlay"><div class="center"><div class="container"></div></div></div></div><div id="footer" class="container"><div class="inner"><span class="copyright">&copy; Kissy Learning 2014</span></div></div><script src="http://surunzi.github.io/KissyLearning/js/kissy/seed.js"></script><script src="http://surunzi.github.io/KissyLearning/js/KissyLearning.js"></script></body></html><script type="text/javascript">var disqus_shortname = 'kissylearning';
var disqus_url = 'http://surunzi.github.io/KissyLearning/api/attribute/';
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script src="http://surunzi.github.io/KissyLearning/js/prettify/prettify.js"></script>
/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Jun 13 11:40
*/
KISSY.add("anim/base","dom,querystring,./base/utils,./base/queue,promise,util".split(","),function(m,h,q,n){function l(i,b,g,p,k){if(i.node)k=i;else{if(typeof b==="string"){b=e.parse(""+b,";",":");c.each(b,function(i,a){var d=c.trim(a);d&&(b[d]=c.trim(i));(!d||d!==a)&&delete b[a]})}if(c.isPlainObject(g))k=c.clone(g);else{k={complete:k};if(g)k.duration=g;if(p)k.easing=p}k.node=i;k.to=b}k=c.merge(o,k);l.superclass.constructor.call(this);a.Defer(this);this.config=k;i=k.node;c.isPlainObject(i)||(i=d.get(k.node));
this.node=this.el=i;this._backupProps={};this._propsData={};var i={},b=k.to,j;for(j in b)i[f(j)]=b[j];k.to=i}var d=h("dom"),e=h("querystring"),g=h("./base/utils"),j=h("./base/queue"),a=h("promise"),c=h("util"),b=d.NodeType,f=c.camelCase,m=c.noop,p={toggle:1,hide:1,show:1},o={duration:1,easing:"linear"};c.extend(l,a,{prepareFx:m,runInternal:function(){var i=this,a=i.config,f=i.node,e,k=i._backupProps,j=i._propsData,h=a.to,l=a.delay||0,m=a.duration;g.saveRunningAnim(i);c.each(h,function(i,b){c.isPlainObject(i)||
(i={value:i});j[b]=c.mix({delay:l,easing:a.easing,frame:a.frame,duration:m},i)});if(f.nodeType===b.ELEMENT_NODE){if(h.width||h.height){h=f.style;c.mix(k,{overflow:h.overflow,"overflow-x":h.overflowX,"overflow-y":h.overflowY});h.overflow="hidden";if(d.css(f,"display")==="inline"&&d.css(f,"float")==="none"){h.zoom=1;h.display="inline-block"}}var o,n;n=d.css(f,"display")==="none";c.each(j,function(c,a){e=c.value;if(p[e]){if(e==="hide"&&n||e==="show"&&!n){i.stop(true);return o=false}k[a]=d.style(f,a);
e==="toggle"&&(e=n?"show":"hide");if(e==="hide"){c.value=0;k.display="none"}else{c.value=d.css(f,a);d.css(f,a,0);d.show(f)}}});if(o===false)return}i.startTime=c.now();if(c.isEmptyObject(j)){i.__totalTime=m*1E3;i.__waitTimeout=setTimeout(function(){i.stop(true)},i.__totalTime)}else{i.prepareFx();i.doStart()}},isRunning:function(){return g.isAnimRunning(this)},isPaused:function(){return g.isAnimPaused(this)},pause:function(){if(this.isRunning()){this._runTime=c.now()-this.startTime;this.__totalTime=
this.__totalTime-this._runTime;g.removeRunningAnim(this);g.savePausedAnim(this);this.__waitTimeout?clearTimeout(this.__waitTimeout):this.doStop()}return this},doStop:m,doStart:m,resume:function(){var a=this;if(a.isPaused()){a.startTime=c.now()-a._runTime;g.removePausedAnim(a);g.saveRunningAnim(a);if(a.__waitTimeout)a.__waitTimeout=setTimeout(function(){a.stop(true)},a.__totalTime);else{a.beforeResume();a.doStart()}}return a},beforeResume:m,run:function(){var a;a=this.config.queue;if(a===false)this.runInternal();
else{a=j.queue(this.node,a,this);a.length===1&&this.runInternal()}return this},stop:function(a){var b=this.node,f=this.config.queue;if(this.isResolved()||this.isRejected())return this;if(this.__waitTimeout){clearTimeout(this.__waitTimeout);this.__waitTimeout=0}if(!this.isRunning()&&!this.isPaused()){f!==false&&j.remove(b,f,this);return this}this.doStop(a);g.removeRunningAnim(this);g.removePausedAnim(this);var e=this.defer;if(a){var h,a=this.config.complete;c.isEmptyObject(h=this._backupProps)||d.css(this.node,
h);a&&a.call(this);e.resolve([this])}else e.reject([this]);if(f!==false)(b=j.dequeue(b,f))&&b[0]&&b[0].runInternal();return this}});var r=l.Statics={isRunning:g.isElRunning,isPaused:g.isElPaused,stop:g.stopEl,Q:j};c.each(["pause","resume"],function(a){r[a]=function(c,b){return b===null||typeof b==="string"||b===false?g.pauseOrResumeQueue(c,b,a):g.pauseOrResumeQueue(c,void 0,a)}});n.exports=l});
KISSY.add("anim/base/utils",["./queue","util","dom"],function(m,h,q,n){var l=h("./queue"),d=h("util"),e=h("dom"),g=d.guid("ks-anim-unqueued-"+d.now()+"-"),j=d.guid("ks-anim-paused-"+d.now()+"-");n.exports={saveRunningAnim:function(a){var c=a.node,b=e.data(c,g);b||e.data(c,g,b={});b[d.stamp(a)]=a},removeRunningAnim:function(a){var c=a.node,b=e.data(c,g);b&&(delete b[d.stamp(a)],d.isEmptyObject(b)&&e.removeData(c,g))},isAnimPaused:function(a){var c=e.data(a.node,j);return c?!!c[d.stamp(a)]:0},removePausedAnim:function(a){var c=
a.node,b=e.data(c,j);b&&(delete b[d.stamp(a)],d.isEmptyObject(b)&&e.removeData(c,j))},savePausedAnim:function(a){var c=a.node,b=e.data(c,j);b||e.data(c,j,b={});b[d.stamp(a)]=a},isAnimRunning:function(a){var c=e.data(a.node,g);return c?!!c[d.stamp(a)]:0},isElPaused:function(a){return(a=e.data(a,j))&&!d.isEmptyObject(a)},isElRunning:function(a){return(a=e.data(a,g))&&!d.isEmptyObject(a)},pauseOrResumeQueue:function(a,c,b){a=e.data(a,"resume"===b?j:g);a=d.merge(a);d.each(a,function(a){if(void 0===c||
a.config.queue===c)a[b]()})},stopEl:function(a,c,b,f){b&&(void 0===f?l.clearQueues(a):!1!==f&&l.clearQueue(a,f));a=e.data(a,g);a=d.merge(a);d.each(a,function(a){(void 0===f||a.config.queue===f)&&a.stop(c)})}}});
KISSY.add("anim/base/queue",["dom","util"],function(m,h,q,n){function l(a,b,f){var b=b||j,e,h=d.data(a,g);!h&&!f&&d.data(a,g,h={});h&&(e=h[b],!e&&!f&&(e=h[b]=[]));return e}var d=h("dom"),e=h("util"),g=e.guid("ks-queue-"+e.now()+"-"),j=e.guid("ks-queue-"+e.now()+"-"),a;a={queueCollectionKey:g,queue:function(a,b,f){a=l(a,b);a.push(f);return a},remove:function(c,b,f){var d=l(c,b,1);d&&(f=e.indexOf(f,d),-1<f&&d.splice(f,1));d&&!d.length&&a.clearQueue(c,b);return d},clearQueues:function(a){d.removeData(a,
g)},clearQueue:function(a,b){var b=b||j,f=d.data(a,g);f&&delete f[b];e.isEmptyObject(f)&&d.removeData(a,g)},dequeue:function(c,b){var d=l(c,b,1);d&&(d.shift(),d.length||a.clearQueue(c,b));return d}};n.exports=a});

/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Jun 13 11:50
*/
KISSY.add("event/custom",["./custom/target","util","./custom/object"],function(f,d,m,j){f=d("./custom/target");m=d("util");j.exports={Target:f,Object:d("./custom/object"),global:m.mix({},f)}});
KISSY.add("event/custom/target",["event/base","./observable","util"],function(f,d,m,j){var f=d("event/base"),h=d("./observable"),l=d("util"),k=f.Utils,n=k.splitAndRun;j.exports={isTarget:1,getCustomEventObservable:function(a,b){var c,g=this.getCustomEvents();c=g&&g[a];!c&&b&&(c=g[a]=new h({currentTarget:this,type:a}));return c},fire:function(a,b){var c=this,g,o=c.getTargets(),p=o&&o.length;a.isEventObject&&(b=a,a=a.type);b=b||{};n(a,function(a){var e;k.fillGroupsForEvent(a,b);a=b.type;if((e=c.getCustomEventObservable(a))||
p){if(e){if(!e.hasObserver()&&!e.defaultFn&&(e.bubbles&&!p||!e.bubbles))return}else e=new h({currentTarget:c,type:a});a=e.fire(b);g!==false&&a!==void 0&&(g=a)}});return g},publish:function(a,b){var c,g=this;n(a,function(a){c=g.getCustomEventObservable(a,!0);l.mix(c,b)});return g},addTarget:function(a){var b=this.getTargets();l.inArray(a,b)||b.push(a);return this},removeTarget:function(a){var b=this.getTargets(),a=l.indexOf(a,b);-1!==a&&b.splice(a,1);return this},getTargets:function(){return this["__~ks_bubble_targets"]||
(this["__~ks_bubble_targets"]=[])},getCustomEvents:function(){return this["__~ks_custom_events"]||(this["__~ks_custom_events"]={})},on:function(a,b,c){var g=this;k.batchForType(function(a,b,c){b=k.normalizeParam(a,b,c);a=b.type;if(a=g.getCustomEventObservable(a,!0))a.on(b)},0,a,b,c);return g},detach:function(a,b,c){var g=this;k.batchForType(function(a,b,c){var e=k.normalizeParam(a,b,c);(a=e.type)?(a=g.getCustomEventObservable(a,!0))&&a.detach(e):(a=g.getCustomEvents(),l.each(a,function(a){a.detach(e)}))},
0,a,b,c);return g}}});
KISSY.add("event/custom/observable",["event/base","./observer","./object","util"],function(f,d,m,j){function h(){h.superclass.constructor.apply(this,arguments);this.defaultFn=null;this.defaultTargetOnly=!1;this.bubbles=!0}var f=d("event/base"),l=d("./observer"),k=d("./object"),n=f.Utils;d("util").extend(h,f.Observable,{on:function(a){a=new l(a);-1===this.findObserver(a)&&this.observers.push(a)},fire:function(a){var a=a||{},b=this.bubbles,c=this.currentTarget,g,d=this.type,f=this.defaultFn,h,e=a,i;
a.type=d;e.isEventObject||(e=new k(e));e.target=e.target||c;e.currentTarget=c;a=this.notify(e);!1!==i&&void 0!==a&&(i=a);if(b&&!e.isPropagationStopped()){g=(b=c.getTargets())&&b.length||0;for(h=0;h<g&&!e.isPropagationStopped();h++)a=b[h].fire(d,e),!1!==i&&void 0!==a&&(i=a)}if(f&&!e.isDefaultPrevented()&&(d=e.target,a=d.getCustomEventObservable(e.type),!this.defaultTargetOnly&&(!a||!a.defaultTargetOnly)||c===d))i=f.call(c,e);return i},notify:function(a){var b=[].concat(this.observers),c,g,d=b.length,
f;for(f=0;f<d&&!a.isImmediatePropagationStopped();f++)c=b[f].notify(a,this),!1!==g&&void 0!==c&&(g=c);return g},detach:function(a){var b,c=a.fn,g=a.context,d=this.currentTarget,f=this.observers,a=a.groups;if(f.length){a&&(b=n.getGroupsRe(a));var h,e,i,k,j=f.length;if(c||b){g=g||d;h=a=0;for(e=[];a<j;++a)if(i=f[a],k=i.context||d,g!==k||c&&c!==i.fn||b&&!i.groups.match(b))e[h++]=i;this.observers=e}else this.reset()}}});j.exports=h});
KISSY.add("event/custom/observer",["event/base","util"],function(f,d,m,j){function h(){h.superclass.constructor.apply(this,arguments)}f=d("event/base");d("util").extend(h,f.Observer,{keys:["fn","context","groups"]});j.exports=h});KISSY.add("event/custom/object",["event/base","util"],function(f,d,m,j){function h(d){h.superclass.constructor.call(this);l.mix(this,d)}var f=d("event/base"),l=d("util");l.extend(h,f.Object);j.exports=h});

<!doctype html><html><head><meta charset="utf-8"><title>使用requirejs的define方法来添加模块</title><link rel="stylesheet" href="http://surunzi.github.io/KissyLearning/css/style.css"><link rel="shortcut icon" href="http://surunzi.github.io/KissyLearning/favicon.ico"></head><body><div id="nav"><ul class="container"><li><a href="http://surunzi.github.io/KissyLearning/">首页</a></li><li><a href="http://surunzi.github.io/KissyLearning/tutorial/">教程</a></li><li><a href="http://surunzi.github.io/KissyLearning/example/">示例</a></li><li><a href="http://surunzi.github.io/KissyLearning/api/">API</a></li><li><a href="http://surunzi.github.io/KissyLearning/tool/">工具</a></li><li><a href="http://surunzi.github.io/KissyLearning/document/">文档</a></li><li><a href="http://gallery.kissyui.com/">组件</a></li><li><a href="http://docs.kissyui.com/">官网</a></li><li><a href="https://github.com/kissyteam/kissy">GitHub</a></li><li><a href="http://surunzi.github.io/KissyLearning/feed.xml">RSS</a></li></ul></div><div id="page" data-feature="prettify"></div><div id="post" class="container"><div class="article"><h2 class="title">使用requirejs的define方法来添加模块</h2><p>记得之前在Kissy的官网上，有人建议将依赖模块的声明放到前面去，这样看起来会比较方便些。官网提供的解决方法是：</p><pre><code>KISSY.add(function(S, require){
    var A = require('a');
    var B = require('b');
    var C = require('c');
    // Your code...
});
</code></pre><p>如果觉得对这种解决方法不满意的话，我们也可以自行解决，方法就是在KISSY.add方法上再套上一层将参数位置颠倒，比如下面：</p><pre><code>(function (S) {
    window.define = S.define = function (deps, callback) {
        var slice = Array.prototype.slice;
            
        if (arguments.length === 1) {
            S.add(deps);
            return;
        }
        
        S.add(function () {
            return callback.apply(null, slice.apply(arguments, [1]));
        }, {
            requires: deps
        });
    }
})(KISSY);
</code></pre><p>将这段代码紧贴在Kissy库后面，就可以用requireJs的方法来添加模块了，比如下面：</p><p>module-A.js</p><pre><code>define(['node', 'base'], function (Node, Base) {
    ...
});
</code></pre><p>或者是下面这样：</p><pre><code>define(function () {
    ...
})
</code></pre><p>当然这段代码很粗糙，并没有做太多处理，你可以根据自己的实际需要再对其进行定制修改。。</p></div><div id="post-disqus-container"><div id="disqus_thread"></div></div></div><script type="text/javascript">var disqus_shortname = 'kissylearning';
var disqus_url = 'http://surunzi.github.io/KissyLearning/basic-tutorial/2014/06/09/use-requirejs-style-to-add-module/';
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script src="http://surunzi.github.io/KissyLearning/js/prettify/prettify.js"></script><div id="footer" class="container"><div class="inner"><span class="copyright">&copy; Kissy Learning 2014</span></div></div><script src="http://surunzi.github.io/KissyLearning/js/kissy/seed-min.js"></script><script src="http://surunzi.github.io/KissyLearning/js/KissyLearning.js"></script></body></html>